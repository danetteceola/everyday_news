# 预发布环境配置
# 复制此文件为 .env.staging 并根据实际情况修改

# 数据库配置
DATABASE_PATH=./data/everyday_news_staging.db
BACKUP_PATH=./data/backups_staging
MAX_CONNECTIONS=5
DATABASE_TIMEOUT=3000

# 备份配置
BACKUP_RETENTION_DAYS=3
BACKUP_COMPRESSION=true

# 性能配置
QUERY_CACHE_ENABLED=true
QUERY_CACHE_SIZE=500
SLOW_QUERY_THRESHOLD=500 # 毫秒

# 迁移配置
MIGRATION_TABLE_NAME=schema_migrations
MIGRATION_DIRECTORY=./src/db/migrations

# 系统架构模块配置

# 调度器配置
SCHEDULER_MAX_CONCURRENT_TASKS=2
SCHEDULER_TASK_TIMEOUT=600000

# 通知系统配置
# Telegram - 在预发布环境可以使用测试bot
TELEGRAM_BOT_TOKEN=${TELEGRAM_BOT_TOKEN:-}
TELEGRAM_CHAT_ID=${TELEGRAM_CHAT_ID:-}

# Email - 可以使用测试邮箱
SMTP_HOST=${SMTP_HOST:-}
SMTP_PORT=${SMTP_PORT:-587}
SMTP_USER=${SMTP_USER:-}
SMTP_PASS=${SMTP_PASS:-}
SMTP_SECURE=false
EMAIL_RECIPIENT=${EMAIL_RECIPIENT:-}

# Webhook - 可选配置
WEBHOOK_URL=${WEBHOOK_URL:-}
WEBHOOK_SECRET=${WEBHOOK_SECRET:-}

# 监控配置
MONITORING_COLLECTION_INTERVAL=30000
MONITORING_ALERT_THRESHOLD_COLLECTION_SUCCESS=70
MONITORING_ALERT_THRESHOLD_DATA_COMPLETENESS=80
MONITORING_ALERT_THRESHOLD_PERFORMANCE=3000 # 毫秒

# LLM配置 (Claude集成)
LLM_MODEL=claude-3-haiku-20240307  # 使用更便宜的模型用于测试
LLM_TEMPERATURE=0.8
LLM_API_KEY=${LLM_API_KEY:-}
LLM_MAX_RETRIES=2
LLM_RETRY_DELAY=60000 # 1分钟，单位毫秒
LLM_CACHE_TTL=1800000 # 30分钟，单位毫秒

# 日志配置
LOG_LEVEL=debug
LOG_FILE=/app/logs/app_staging.log
LOG_MAX_SIZE=5242880 # 5MB
LOG_MAX_FILES=5

# 系统配置
NODE_ENV=staging
PORT=3001
HOST=0.0.0.0
MAX_REQUEST_SIZE=5242880 # 5MB
REQUEST_TIMEOUT=60000 # 60秒

# 健康检查配置
HEALTH_CHECK_INTERVAL=60000 # 60秒
HEALTH_CHECK_TIMEOUT=10000 # 10秒